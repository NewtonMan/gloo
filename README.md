# solo-kit
Tools for Building Declarative API, stateless Projects

# Dev cycle usage notes
## basic init
- pull repo
- gather dependencies: `dep ensure -v`
  - note: we will move to go modules soon
## solo-kit-specific (guide to the Makefile)
- you should only need to do this if you change or add an api
  - apis are represented in protobuf files with solo-kit-specific annotations
  - generated protobuf files have the `.pb.go` suffix
  - generated protobuf files include the standard golang generated file regex, specifically the string: `// Code generated by protoc-gen-gogo. DO NOT EDIT.`
- install the solo-kit protc plugin: `make install-plugin`
- generate the libs provided by solo-kit: `make -B generated-code`
  - generated files include the standard golang generated file regex, specifically the string: `// Code generated by protoc-gen-solo-kit. DO NOT EDIT.`
  - generated files have the `.sk.go` suffix (generated test files do not include this suffix)
## deploy gloo to minishift (or restart deployment)
- add repo path to your .bash_profile: `export SOLO_KIT_DIR=/Users/mitch/go/src/github.com/solo-io/solo-kit/`
- run the restart script: `cd $SOLO_KIT_DIR && ./hack/restart.sh`
  - (some setup required, see script for details)
  - this is useful because minishift takes 1-2 minutes to startup before you can pass it config
## update containers running in your deployment
- rebuild and push your project: `cd $SOLO_KIT_DIR && ./hack/openshift/recompile.sh <project_name> <tag_name>`
  - project_name is any of the dir names in the `projects` dir
  - tag_name is whatever the image tag was set to (`ilackarms` by default)
- delete the the pod to force k8s to pull your new image: `oc delete pod <pod_name>`


# Current projects:
- apiserver
- discovery
- gateway
- gloo
- hypergloo
- nginx
- rate-limit
- sqoop
- supergloo


## Major TODOS:

* pkg/api/v1/clients <- support / enforce resource versioning on updates / creates (be consistent with Kube)

steps:
XXX: snapshot + cache
xxx: split out SetStatus stuff for IsInputResource in code gen
XX4 - reporter

XXX - desired-state-achiever (syncer library)
 
xxx - support selectors/labels

5 - e2e tests

XXX 6 - callbacks for apiserver
xxx - something that works for 3rd party resources (configmaps, artifacts, etc)

7 - acl for apiserver

 post 3 weeks
- bootstrap
- installer
- CLI
- tests for consul and file


- caching plugin
- extending xds for rate limit, extauth


syncers:
- generic ADS server, returns the grpc server to which envoy, rate limit, etc register


gloo:
- plugins > eds > bootstrap for setup
