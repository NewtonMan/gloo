// Code generated by skv2. DO NOT EDIT.

// Definition for a template that provides an entrypoint for all a federated groups's reconcilers
package federation

import (
	"context"

	"github.com/solo-io/go-utils/contextutils"
	"github.com/solo-io/skv2/pkg/reconcile"
	enterprise_gloo_solo_io_v1 "github.com/solo-io/solo-apis/pkg/api/enterprise.gloo.solo.io/v1"
	fed_enterprise_gloo_solo_io_v1 "github.com/solo-io/solo-projects/projects/gloo-fed/pkg/api/fed.enterprise.gloo.solo.io/v1"
	fed_enterprise_gloo_solo_io_v1_controller "github.com/solo-io/solo-projects/projects/gloo-fed/pkg/api/fed.enterprise.gloo.solo.io/v1/controller"
	"github.com/solo-io/solo-projects/projects/gloo-fed/pkg/federation/placement"
	"github.com/solo-io/solo-projects/projects/gloo-fed/pkg/multicluster"
	"go.uber.org/zap"
	"sigs.k8s.io/controller-runtime/pkg/manager"
)

func Initialize(
	ctx context.Context,
	localManager manager.Manager,
	baseMCClientset enterprise_gloo_solo_io_v1.MulticlusterClientset,
	clusterSet multicluster.ClusterSet,
	placementManager placement.Manager,
) error {

	federatedAuthConfigs := NewFederatedAuthConfigReconciler(
		ctx,
		fed_enterprise_gloo_solo_io_v1.NewClientset(localManager.GetClient()).FederatedAuthConfigs(),
		baseMCClientset,
		placementManager,
		clusterSet,
	)
	federatedAuthConfigReconciler := fed_enterprise_gloo_solo_io_v1_controller.NewFederatedAuthConfigReconcileLoop("federatedAuthConfig", localManager, reconcile.Options{})
	if err := federatedAuthConfigReconciler.RunFederatedAuthConfigReconciler(ctx, federatedAuthConfigs); err != nil {
		contextutils.LoggerFrom(ctx).Errorw("Error running FederatedAuthConfig reconciler", zap.Error(err))
		return err
	}

	return nil
}
