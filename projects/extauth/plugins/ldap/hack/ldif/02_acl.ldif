dn: olcDatabase={1}mdb,cn=config
changeType: modify
######################################################################
# Delete default ACLs that come with Docker image
######################################################################
delete: olcAccess
olcAccess: to attrs=userPassword,shadowLastChange by self write by dn="cn=admin,dc=solo,dc=io" write by anonymous auth by * none
-
delete: olcAccess
olcAccess: to * by self read by dn="cn=admin,dc=solo,dc=io" write by * none
-
######################################################################
# Control access to People
######################################################################
add: olcAccess
olcAccess: to dn.subtree="ou=people,dc=solo,dc=io"
    by dn="cn=admin,dc=solo,dc=io" write
    by group.exact="cn=managers,ou=groups,dc=solo,dc=io" write
    by group.exact="cn=developers,ou=groups,dc=solo,dc=io" read
    by group.exact="cn=sales,ou=groups,dc=solo,dc=io" read
    by anonymous auth
-
######################################################################
# Control access to Groups
######################################################################
add: olcAccess
olcAccess: to dn.subtree="ou=groups,dc=solo,dc=io"
    by dn="cn=admin,dc=solo,dc=io" write
    by group.exact="cn=managers,ou=groups,dc=solo,dc=io" write
    by group.exact="cn=developers,ou=groups,dc=solo,dc=io" write
-
######################################################################
# This policy applies to the 'userPassword' attribute only
# 'self write' grants only the owner of the entry write permission to this attribute
# 'anonymous auth' grants an anonymous user access to this attribute only for authentication purposes (required for BIND)
# 'developers' group members can update any user's password
######################################################################
add: olcAccess
olcAccess: to attrs=userPassword
  by self write
  by anonymous auth
  by dn="cn=admin,dc=solo,dc=io"
  by group.exact="cn=developers,ou=groups,dc=solo,dc=io" write
  by * none
-
######################################################################
# This policy applies to all entries under the "dc=solo,dc=io" subtree
# 'managers' have read access at all the organization's information
######################################################################
add: olcAccess
olcAccess: to dn.subtree="dc=solo,dc=io"
  by self write
  by dn="cn=admin,dc=solo,dc=io" write
  by group.exact="cn=managers,ou=groups,dc=solo,dc=io" read
  by * none