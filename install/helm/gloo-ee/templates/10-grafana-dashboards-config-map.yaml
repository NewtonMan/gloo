# Config map which grafana reads in order to create custom dashboard dir
{{- if or .Values.grafana.defaultInstallationEnabled .Values.observability.customGrafana.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: glooe-grafana-custom-dashboards
  labels:
    app: gloo
    chart: glooe-grafana
    release: {{ .Release.Name }}
    {{- $installationContext := dict "Values" .Values.gloo }} # TODO: https://github.com/solo-io/gloo/issues/1635
    installationId: {{ include "gloo.installationId" $installationContext }}
data:
{{ (.Files.Glob "dashboards/*.json").AsConfig | indent 2 }}
{{- end }}